<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/WEB-INF/template/template.xhtml">
	<ui:define name="metadata">
	</ui:define>
	<ui:define name="content">

		<style>
.ui-datatable-scrollable-theadclone {
	visibility: collapse;
}

q

.ui-dialog .ui-dialog-titlebar {
	padding: .4em .4em .4em 1em;
	position: relative;
	background: #07295b !important;
	padding: 5px 5px 5px 5px;
	margin: 0px 0px 0px 0px;
	color: #ffffff;
}

.ui-panelgrid .ui-panelgrid-cell {
	background-color: #f1f1f1;
}

.ui-icon.ui-confirm-dialog-severity {
	background-position: 0 0 !important;
	background-image: none !important;
}

.colorHighlight {
	background: yellow !important;
}

.ui-dialog .ui-widget .ui-widget-content .ui-corner-all .ui-shadow .ui-hidden-container .ui-draggable
	{
	width: 50%;
}

.firstColumn {
	width: 100%;
}

.secondColumn {
	width: 100%;
}

.dashboardNRResendDocRecord {
	background-color: #16e5d7 !important;
}

.ui-state-default a, .ui-state-default a:link, .ui-state-default a:visited
	{
	color: #07295b;
}

.mainDiv {
	width: 99%;
	height: auto;
	border-left: solid;
	border-right: solid;
	border-bottom: solid;
	border-top: solid;
	border-color: #07295b;
	border-width: 1px;
	margin-left: 5px;
	margin-top: 5px;
	margin-bottom: 5px;
	/*background-image: linear-gradient(to right bottom, #d9ddfa, #ccd4fb, #bdcafc, #aec2fe,
		#9cb9ff);*/
	background-image: linear-gradient(to right bottom, #f1f1f1, #dfdfe4, #f1f1f1, #e9eaeb,
		#bbb5b5);
}

.ui-inputfield, .ui-widget-content .ui-inputfield, .ui-widget-header .ui-inputfield
	{
	color: #07295b;
}

.mainLinkButton {
	font-weight: bold;
	background: #2571fa !important;
	text-align: center;
	padding: 7px 25px 7px 25px !important;
	height: 35px !important;
	text-decoration: none !important;
	color: white !important;
	white-space: nowrap !important;
	border-radius: 5px !important;
}

.mainLinkButton:hover {
	background: #fba026 !important;
}

.otherLinkButton {
	font-weight: bold;
	background: #296807 !important;
	text-align: center;
	padding: 7px 25px 7px 25px !important;
	height: 35px !important;
	text-decoration: none !important;
	color: white !important;
	white-space: nowrap !important;
	border-radius: 5px !important;
}

.otherLinkButton:hover {
	background: #fba026 !important;
}

.mainActionbtn {
	font-weight: bold;
	background: #2571fa !important;
	height: 30px !important;
	border-radius: 5px !important;
	color: white !important;
	text-align: center;
	width: 80px;
	white-space: nowrap !important;
	-webkit-transition: background-color 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out;
	transition: background-color 0.3s ease-out;
}

.mainActionbtn:hover {
	background: #fba026 !important;
}

.OthActionbtn {
	font-weight: bold;
	background: #296807 !important;
	height: 30px !important;
	border-radius: 5px !important;
	color: white !important;
	text-align: center;
	width: 80px;
	white-space: nowrap !important;
	-webkit-transition: background-color 0.3s ease-out;
	-moz-transition: background-color 0.3s ease-out;
	-o-transition: background-color 0.3s ease-out;
	transition: background-color 0.3s ease-out;
	margin-bottom: 5px;
}

.OthActionbtn:hover {
	background: #fba026 !important;
}

.subDiv {
	margin: 0 auto;
	background: rgb(254, 255, 255); /* Old browsers */
	background: -moz-linear-gradient(-45deg, rgba(254, 255, 255, 1) 0%,
		rgba(210, 235, 249, 1) 100%); /* FF3.6-15 */
	background: -webkit-linear-gradient(-45deg, rgba(254, 255, 255, 1) 0%,
		rgba(210, 235, 249, 1) 100%); /* Chrome10-25,Safari5.1-6 */
	background: linear-gradient(135deg, rgba(254, 255, 255, 1) 0%,
		rgba(210, 235, 249, 1) 100%);
	/* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#feffff',
		endColorstr='#d2ebf9', GradientType=1);
	/* IE6-9 fallback on horizontal gradient */
}

.internalPanel .ui-panelgrid-cell {
	padding: 5px 0px;
}

.internalInput .ui-panelgrid-cell {
	padding: 0px;
}

#Dob {
	width: 80% !important;
}

.calendarClass input {
	width: 73% !important;
}

.numField .ui-inputfield {
	width: 89% !important;
	font-weight: bold;
	text-align: right;
}

.footer {
	height: 20px;
	background-color: #07295b;
	/* padding: .7em 1.5em 0em 1.5em; */
	text-align: center;
	colour: #84063A;
	color: #777373;
}

.ui-datatable-scrollable .ui-datatable-scrollable-header {
	min-height: 20px;
}

.ui-datatable-scrollable-body {
	height: 125px !important;
}
</style>

		<div class="mainDiv">
			<!-- header -->
			<h1
				style="margin-top: 0%; text-align: center; color: #ffffff; background-color: #404d6f !important;"
				class="common_form_header">Survey Management</h1>

			<div style="width: 95%;" class="subDiv">

				<h:form id="frm_Search">
					<!-- panel 01 Start-->
					<p:panel id="pnl_Search">

						<p:panelGrid columns="4"
							columnClasses="ui-grid-col-3,ui-grid-col-2,ui-grid-col-3,ui-grid-col-4"
							layout="grid">

							<!-- _Survey No.-->
							<p:panelGrid></p:panelGrid>
							<p:panelGrid>
								<p:outputLabel>Survey No.</p:outputLabel>
								<p:outputLabel value="*" style="color:red;"></p:outputLabel>
							</p:panelGrid>
							<p:panelGrid>
								<p:selectOneMenu id="drpd_SurveyNo" style="width:80%;"
									effect="fold" filter="true" filterMatchMode="contains"
									value="#{surveyManageBackingBean.surveyDTO.surveyNo}">
									<p:ajax listener="#{surveyManageBackingBean.onSurveyNoChange}"
										process="@all" update="@all" />

									<f:selectItem itemLabel="-- Select Survey No. --" itemValue="" />
									<f:selectItems value="#{surveyManageBackingBean.surveyNoList}"
										var="surveyNoList" itemLabel="#{surveyNoList.surveyNo}"
										itemValue="#{surveyNoList.surveyNo}" />
								</p:selectOneMenu>
							</p:panelGrid>
							<p:panelGrid></p:panelGrid>

							<!-- _Survey Type -->
							<p:panelGrid></p:panelGrid>
							<p:panelGrid>
								<p:outputLabel>Survey Type</p:outputLabel>
							</p:panelGrid>
							<p:panelGrid>
								<p:inputText id="txt_SurveyType" style="width:89%;height:18px;"
									maxlength="50" readonly="true"
									value="#{surveyManageBackingBean.surveyDTO.surveyType}"
									onkeyup="this.value=this.value.toUpperCase();">
								</p:inputText>
							</p:panelGrid>
							<p:panelGrid></p:panelGrid>
							<!-- _Survey Method -->
							<p:panelGrid></p:panelGrid>
							<p:panelGrid>
								<p:outputLabel>Survey Method</p:outputLabel>
							</p:panelGrid>
							<p:panelGrid>
								<p:inputText id="txt_SurveyMethod"
									style="width:89%;height:18px;" maxlength="50" readonly="true"
									value="#{surveyManageBackingBean.surveyDTO.surveyMethod}"
									onkeyup="this.value=this.value.toUpperCase();">
								</p:inputText>
							</p:panelGrid>
							<p:panelGrid></p:panelGrid>

						</p:panelGrid>
						<center>
							<p:panel>
								<!-- Search button -->
								<p:commandButton styleClass="mainActionbtn" value="Search"
									ajax="false" process="@all" update="@all"
									action="#{surveyManageBackingBean.searchApplication}"></p:commandButton>
								<!-- Clear button -->
								<p:commandButton styleClass="mainActionbtn" value="Clear"
									ajax="false" update="@all"
									action="#{surveyManageBackingBean.clear}">
								</p:commandButton>
							</p:panel>
						</center>
					</p:panel>
				</h:form>
				<!-- panel 01 End-->

				<!-- Start tab view section -->
				<p:tabView id="tabviewId"
					activeIndex="#{surveyManageBackingBean.activeTabIndex}"
					rendered="#{surveyManageBackingBean.renderTabView}">
					<!-- 	rendered="#{editPermitIssuanceBackingBean.applicationFound}" -->
					<!-- ***********************************      Tab 01       ******************************************************************* -->
					<p:tab title="Assign Survey Location And Team">
						<h:form id="frm_Tender">

							<!-- panel 01 Start-->
							<p:panel>

								<p:panelGrid columns="4" style="margin-bottom:5px;"
									columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
									layout="grid">

									<!-- _Location -->
									<p:panelGrid>
										<p:outputLabel value="Location"></p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:selectOneMenu id="drpd_Location" style="width:80%;"
										effect="fold" filter="true" filterMatchMode="contains"
										value="#{surveyManageBackingBean.surveyDTO.location}">
										<f:selectItem itemLabel="-- Select Location --" itemValue="" />
										<f:selectItems value="#{surveyManageBackingBean.locationList}"
											var="locationList" itemValue="#{locationList.code}"
											itemLabel="#{locationList.location}" />
									</p:selectOneMenu>
									<p:outputLabel></p:outputLabel>
									<p:outputLabel></p:outputLabel>

									<!-- _Start Date -->
									<p:panelGrid>
										<p:outputLabel value="Start Date"></p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:panelGrid>
										<div style="width: 100%">
											<p:calendar id="cld_StartDate" styleClass="calendarClass"
												value="#{surveyManageBackingBean.surveyDTO.startDate}"
												readonlyInput="true" mindate="today" yearRange="c-100:c+100"
												navigator="true" locale="en_US" showOn="button"
												process="@form" update="@form" pattern="dd/MM/yyyy"
												placeholder="DD/MM/YYYY" mask="true">
												<!-- readonlyInput="true" -->
											</p:calendar>
										</div>
									</p:panelGrid>

									<!-- _End Date -->
									<p:panelGrid>
										<p:outputLabel value="End Date"></p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:panelGrid>
										<div style="width: 100%">
											<p:calendar id="cld_EndDate" styleClass="calendarClass"
												value="#{surveyManageBackingBean.surveyDTO.endDate}"
												readonlyInput="true" mindate="today" yearRange="c-100:c+100"
												navigator="true" locale="en_US" showOn="button"
												pattern="dd/MM/yyyy" placeholder="DD/MM/YYYY" mask="true">

											</p:calendar>
										</div>
									</p:panelGrid>

									<!-- _Start Time -->
									<p:panelGrid>
										<p:outputLabel value="Start Time"></p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>

									<p:panelGrid>
										<div style="width: 50%">
											<p:calendar id="cld_StartTime" styleClass="calendarClass"
												value="#{surveyManageBackingBean.surveyDTO.startTime}"
												pattern="HH:mm" timeOnly="true" placeholder="HH:MM"
												mask="true" />
										</div>
									</p:panelGrid>

									<!-- _End Time -->
									<p:panelGrid>
										<p:outputLabel value="End Time"></p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:panelGrid>
										<div style="width: 50%">
											<p:calendar id="cld_EndTime" styleClass="calendarClass"
												value="#{surveyManageBackingBean.surveyDTO.endTime}"
												pattern="HH:mm" timeOnly="true" placeholder="HH:MM"
												mask="true" />
										</div>

									</p:panelGrid>

								</p:panelGrid>

								<!-- Add Button : Save Location And Time -->
								<p:panelGrid style="margin-bottom:5px;">
									<center>
										<p:commandButton styleClass="mainActionbtn" value="Add"
											action="#{surveyManageBackingBean.addLocationTime}"
											id="cmd_AddLocationTime" process="@form" update="@form"></p:commandButton>
									</center>
								</p:panelGrid>

								<!-- _table Location And Time -->
								<p:dataTable id="tbl_LocationAndTime"
									value="#{surveyManageBackingBean.locationAndTimeTableList}"
									var="locationAndTimeTable" selectionMode="single"
									selection="#{surveyManageBackingBean.surveyLocationTeamDTO.locationSeqNo}"
									rowKey="#{locationAndTimeTable.locationSeqNo}"
									resizableColumns="false" liveResize="true" rowIndexVar="index"
									emptyMessage="No Records Available">

									<p:ajax event="rowSelect"
										listener="#{surveyManageBackingBean.onLocationRowSelect}"
										process="@form" update="@form" />
									<p:ajax event="rowUnselect"
										listener="#{surveyManageBackingBean.onLocationRowUnSelect}" />

									<p:column headerText="Location"
										style="text-align:left;width:30%">
										<h:outputText value="#{locationAndTimeTable.location}"></h:outputText>
									</p:column>
									<p:column headerText="Start Date"
										style="text-align:center;width:15%">
										<h:outputText value="#{locationAndTimeTable.strStartDate}"></h:outputText>
									</p:column>
									<p:column headerText="Start Time"
										style="text-align:center;width:10%">
										<h:outputText value="#{locationAndTimeTable.strStartTime}"></h:outputText>
									</p:column>
									<p:column headerText="End Date"
										style="text-align:center;width:15%">
										<h:outputText value="#{locationAndTimeTable.strEndDate}"></h:outputText>
									</p:column>
									<p:column headerText="End Time"
										style="text-align:center;width:10%">
										<h:outputText value="#{locationAndTimeTable.strEndTime}"></h:outputText>
									</p:column>
									<p:column headerText="" style="text-align:center;width:10%">
										<!-- <h:outputText value="#{locationAndTimeTable.locationSeqNo}"></h:outputText> -->
										<p:commandLink
											action="${surveyManageBackingBean.delete_tbl_LocationTimeRaw(locationAndTimeTable.locationSeqNo)}"
											process="@form" update="@form"
											disabled="#{createAdvancePaymentVoucherBackingBean.disable}">
											<!-- <p:ajax
												listener="#{surveyManageBackingBean.retriveLocationTimeTable}"
												process="@form" update="@form" /> -->
											<!-- update="@form" process="@form" -->
											<p:graphicImage library="images" name="delete.png"
												style="text-align:center;width:24px;height:24px;"
												title="delete"></p:graphicImage>
										</p:commandLink>
									</p:column>

								</p:dataTable>

								<br></br>
								<br></br>
								<p:outputLabel
									value="Please select a location to add team details."
									style="width:100%;height:18px;font-weight:bold"></p:outputLabel>
								<p:outputLabel></p:outputLabel>
								<p:outputLabel></p:outputLabel>
								<p:outputLabel></p:outputLabel>
							</p:panel>


							<br></br>
							<!-- panel 02 End-->
							<p:panel id="pnl_TeamDetails"
								rendered="#{surveyManageBackingBean.renderTeamDetails}">
								<h1
									style="margin-bottom: 2%; text-align: center; color: #404d6f; background-color: #ffffff !important;"
									class="common_form_header">Team Details</h1>

								<p:panelGrid columns="4"
									columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
									layout="grid">

									<!-- _Organization -->
									<p:panelGrid>
										<p:outputLabel value="Organization"></p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:selectOneMenu id="drpd_Organization" style="width:80%;"
										effect="fold" filter="true" filterMatchMode="contains"
										value="#{surveyManageBackingBean.surveyLocationTeamDTO.organization}">
										<f:selectItem itemLabel="-- Select Organization --"
											itemValue="" />
										<f:selectItems
											value="#{surveyManageBackingBean.organizationList}"
											var="organizationList"
											itemValue="#{organizationList.organisationCode}"
											itemLabel="#{organizationList.organisationDescription}" />
										<p:ajax
											listener="#{surveyManageBackingBean.onOrganizationChange}"
											update="drpd_UserId,txt_fullName" />
									</p:selectOneMenu>

									<!-- _User Id -->
									<p:panelGrid>
										<p:outputLabel value="User Id"></p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:selectOneMenu id="drpd_UserId" style="width:80%;"
										disabled="#{surveyManageBackingBean.disableUserId}"
										effect="fold" filter="true" filterMatchMode="contains"
										value="#{surveyManageBackingBean.surveyLocationTeamDTO.userId}">

										<p:ajax listener="#{surveyManageBackingBean.onUserIdChange}"
											update="txt_fullName,txt_nic" />

										<f:selectItem itemLabel="-- Select User Id --" itemValue="" />
										<f:selectItems value="#{surveyManageBackingBean.userIdList}"
											var="userIdList" itemValue="#{userIdList.userId}"
											itemLabel="#{userIdList.userId}" />
									</p:selectOneMenu>

								</p:panelGrid>

								<p:panelGrid columns="2"
									columnClasses="ui-grid-col-3,ui-grid-col-9" layout="grid">
									<!-- _Name -->
									<p:panelGrid>
										<p:outputLabel value="Full Name."></p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:inputText id="txt_fullName" style="width:97%;height:18px;"
										readonly="#{!surveyManageBackingBean.disableUserId}"
										maxlength="50"
										value="#{surveyManageBackingBean.surveyLocationTeamDTO.fullName}"
										onkeyup="this.value=this.value.toUpperCase();">
											
									</p:inputText>

								</p:panelGrid>

								<p:panelGrid columns="4" style="margin-bottom:5px;"
									columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
									layout="grid">

									<!-- _Nic No -->
									<p:panelGrid>
										<p:outputLabel value="Nic No."></p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:inputText style="width:89%;height:18px;" maxlength="12"
										id="txt_nic"
										value="#{surveyManageBackingBean.surveyLocationTeamDTO.nic}"
										onkeyup="this.value=this.value.toUpperCase();">
										
									</p:inputText>

									<!-- _Resposibities -->
									<p:panelGrid>
										<p:outputLabel value="Resposibilities"></p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:selectOneMenu id="drpd_Resposibilities" style="width:80%;"
										effect="fold" filter="true" filterMatchMode="contains"
										value="#{surveyManageBackingBean.surveyLocationTeamDTO.responsibilities}">
										<f:selectItem itemLabel="-- Select Resposibities --"
											itemValue="" />
										<f:selectItems
											value="#{surveyManageBackingBean.responsibilitiesList}"
											var="responsibilitiesList"
											itemValue="#{responsibilitiesList.resposibilitiesCode}"
											itemLabel="#{responsibilitiesList.resposibilitiesDescription}" />
									</p:selectOneMenu>

									<!-- _Bank -->
									<p:outputLabel>Bank</p:outputLabel>
									<p:selectOneMenu id="drpd_Bank" style="width:80%;"
										effect="fold" filter="true" filterMatchMode="contains"
										value="#{surveyManageBackingBean.surveyLocationTeamDTO.bank}">
										<p:ajax listener="#{surveyManageBackingBean.onBankChange}"
											update="drpd_Branch" />
										<f:selectItem itemLabel="-- Select Bank --" itemValue="" />
										<f:selectItems value="#{surveyManageBackingBean.bankList}"
											var="bankList" itemValue="#{bankList.bankCode}"
											itemLabel="#{bankList.bankDescription}" />
									</p:selectOneMenu>

									<!-- _Brach -->
									<p:outputLabel>Branch</p:outputLabel>
									<p:selectOneMenu id="drpd_Branch" style="width:80%;"
										effect="fold" filter="true" filterMatchMode="contains"
										value="#{surveyManageBackingBean.surveyLocationTeamDTO.branch}">
										<f:selectItem itemLabel="-- Select Branch --" itemValue="" />
										<f:selectItems
											value="#{surveyManageBackingBean.bankBranchList}"
											var="bankBranchList" itemValue="#{bankBranchList.branchCode}"
											itemLabel="#{bankBranchList.branchDescription}" />
									</p:selectOneMenu>

									<!-- _Account No -->
									<p:outputLabel>Account No.</p:outputLabel>
									<p:inputText style="width:89%;height:18px;" maxlength="50"
										value="#{surveyManageBackingBean.surveyLocationTeamDTO.accountNo}"
										onkeyup="this.value=this.value.toUpperCase();">
									</p:inputText>
									<p:outputLabel></p:outputLabel>
									<p:outputLabel></p:outputLabel>

								</p:panelGrid>

								<!-- Add Button : Save Team Details -->
								<p:panelGrid style="margin-bottom:5px;">
									<center>
										<p:commandButton styleClass="mainActionbtn" value="Add"
											action="#{surveyManageBackingBean.addTeamByLocation}"
											id="cmd_AddTeamDetails" process="@form" update="@form"></p:commandButton>
									</center>
								</p:panelGrid>

								<!-- _Table team details -->
								<p:dataTable id="tbl_TeamDetials" var="teamDetailsTableList"
									rows="5" paginator="true"
									value="#{surveyManageBackingBean.teamDetailsTableList}"
									paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15" resizableColumns="false"
									liveResize="true" rowIndexVar="index"
									emptyMessage="No Records Available">

									<p:column headerText="Organization"
										style="text-align:left;width:20%">
										<h:outputText value="#{teamDetailsTableList.organization}"></h:outputText>
									</p:column>

									<p:column headerText="User Id."
										style="text-align:left;width:15%">
										<h:outputText value="#{teamDetailsTableList.userId}"></h:outputText>
									</p:column>

									<p:column headerText="Name" style="text-align:center;width:20%">
										<h:outputText value="#{teamDetailsTableList.fullName}"></h:outputText>
									</p:column>

									<p:column headerText="NIC No."
										style="text-align:left;width:15%">
										<h:outputText value="#{teamDetailsTableList.nic}"></h:outputText>
									</p:column>

									<p:column headerText="Responsibility"
										style="text-align:left;width:25%">
										<h:outputText
											value="#{teamDetailsTableList.resposibilitiesDescription}"></h:outputText>
									</p:column>

									<p:column headerText="" style="text-align:center;width:10%">
										<center>
											<p:commandLink
												action="${surveyManageBackingBean.delete_tbl_TeamDetialsRaw(teamDetailsTableList.memberSeqNo)}"
												update="@form" process="@form"
												disabled="#{createAdvancePaymentVoucherBackingBean.disable}">
												<!-- <f:ajax render="paymentDetails" /> -->
												<p:graphicImage library="images" name="delete.png"
													style="text-align:center;width:24px;height:24px;"
													title="delete"></p:graphicImage>
											</p:commandLink>
										</center>
									</p:column>
								</p:dataTable>

								<p:panelGrid>

								</p:panelGrid>
							</p:panel>


						</h:form>
					</p:tab>

					<!-- Tab 02 -->
					<p:tab title="Allocate Cost Estimation">
						<h:form id="frm_AllocateCostEstimate">
							<p:panel>
								<p:panelGrid columns="4"
									disabled="#{surveyManageBackingBean.disableCostEstimationSave}"
									columnClasses="ui-grid-col-3,ui-grid-col-2,ui-grid-col-3,ui-grid-col-4"
									layout="grid">

									<!-- _Code -->
									<p:panelGrid></p:panelGrid>
									<p:panelGrid>
										<p:outputLabel>Cost Type</p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:panelGrid>
										<p:selectOneMenu id="drpd_Code" style="width:80%;"
											disabled="#{surveyManageBackingBean.disableCostEstimationAdd}"
											effect="fold"
											value="#{surveyManageBackingBean.surveyLocationTeamDTO.selectedCostCode}">
											<f:selectItem itemLabel="-- Select --" itemValue="" />
											<f:selectItems
												value="#{surveyManageBackingBean.costCodeList}"
												var="costCodeList" itemValue="#{costCodeList}"
												itemLabel="#{costCodeList}" />
											<p:ajax
												listener="#{surveyManageBackingBean.onChangeCostCode}"
												update="txt_codeDescription" />
										</p:selectOneMenu>
									</p:panelGrid>
									<p:panelGrid></p:panelGrid>
									<!-- _Description -->
									<p:panelGrid></p:panelGrid>
									<p:panelGrid>
										<p:outputLabel>Description</p:outputLabel>
									</p:panelGrid>
									<p:panelGrid>
										<p:inputText id="txt_codeDescription"
											style="width:100%;height:18px;" maxlength="50"
											disabled="#{surveyManageBackingBean.disableCostEstimationAdd}"
											readonly="true"
											value="#{surveyManageBackingBean.surveyLocationTeamDTO.costCodeDescription}"
											onkeyup="this.value=this.value.toUpperCase();">
										</p:inputText>
									</p:panelGrid>
									<p:panelGrid></p:panelGrid>

									<!-- _Amount Rs. -->
									<p:panelGrid></p:panelGrid>
									<p:panelGrid>
										<p:outputLabel>Amount Rs.</p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:panelGrid>
										<p:inputNumber id="amountId"
											inputStyle="text-align: right;width:76%" minValue="0"
											value="#{surveyManageBackingBean.surveyLocationTeamDTO.amount}"
											disabled="#{surveyManageBackingBean.disableCostEstimationAdd}"
											onkeyup="this.value=this.value.toUpperCase();">
											<f:convertNumber pattern="##,###.00" />
										</p:inputNumber>

									</p:panelGrid>
									<p:panelGrid></p:panelGrid>
								</p:panelGrid>
								<!-- Add cost estimation button-->
								<p:panelGrid style="margin-top:5px; margin-bottom:5px;">
									<center>
										<p:commandButton styleClass="mainActionbtn" value="Add"
											action="#{surveyManageBackingBean.addCostEstimation}"
											disabled="#{surveyManageBackingBean.disableCostEstimationAdd}"
											id="cmd_AddAllocateCostEstimate" process="@form"
											update="@form"></p:commandButton>
									</center>
								</p:panelGrid>

								<center>

									<!-- _Table cost estimation -->
									<p:dataTable var="costEstimateTableList" update="@form"
										style="width:98%;" id="tbl_AllocateCostEstimate"
										value="#{surveyManageBackingBean.costEstimateTableList}"
										resizableColumns="false" liveResize="false">

										<p:column headerText="Cost Type"
											style="text-align:left;width:15%">
											<h:outputText style="text-align:left;"
												value="#{costEstimateTableList.costCode}" />
										</p:column>
										<p:column headerText="Description"
											style="text-align:left;width:35%">
											<h:outputText style="text-align:left;"
												value="#{costEstimateTableList.costCodeDescription}" />
										</p:column>

										<p:column headerText="Amount Rs."
											style="text-align:right;width:15%">
											<h:outputText style="text-align:right;font-weight:bold"
												value="#{costEstimateTableList.amount}">
												<f:convertNumber pattern="##,###.00" />
											</h:outputText>
										</p:column>
										<!-- rendered="#{surveyManageBackingBean.disableCostEstimationAdd}" -->
										<p:column headerText="" style="width:7%">
											<p:commandLink
												disabled="#{surveyManageBackingBean.disableCostEstimationAdd}"
												action="${surveyManageBackingBean.delete_tbl_CostEstimateRaw(costEstimateTableList.costCodeSeqNo)}"
												update="tbl_AllocateCostEstimate" process="@form">
												<f:ajax render="paymentDetails" />
												<p:graphicImage library="images" name="delete.png"
													style="width:24px;height:24px;" title="delete"></p:graphicImage>
											</p:commandLink>
										</p:column>
										<p:columnGroup type="footer">
											<p:row>
												<p:column colspan="2" style="text-align:right"
													footerText="Total Fee Rs." />
												<p:column style="text-align:right; font-size: 15px;">
													<f:facet name="footer">
														<h:outputText
															value="#{surveyManageBackingBean.surveyLocationTeamDTO.totalAmount}">
															<f:convertNumber pattern="##,###.00" />
														</h:outputText>
													</f:facet>
												</p:column>
												<!-- <p:column footerText="#{createAdvancePaymentVoucherBackingBean.totalfee}"
											style="text-align:right" />
										<p:column footerText="" /> -->
											</p:row>
										</p:columnGroup>
									</p:dataTable>
								</center>


								<center>
									<p:panel>
										<!-- Save button -->
										<p:commandButton styleClass="mainActionbtn" value="Save"
											ajax="false"
											disabled="#{surveyManageBackingBean.disableCostEstimationSave}"
											update="@all"
											action="#{surveyManageBackingBean.updateCostEstimateTask}"></p:commandButton>


									</p:panel>
								</center>

							</p:panel>
						</h:form>
					</p:tab>

					<!-- Tab 03 -->
					<p:tab title="Grant Approval-Cost Estimation"
						rendered="#{surveyManageBackingBean.renderGrantApproval}">
						<h:form id="frm_GrantApproval">
							<p:panel>

								<center>
									<!-- _Table cost estimation 2-->
									<p:dataTable var="costEstimateTableList" update="@form"
										style="width:98%;" id="tbl_AllocateCostEstimate2"
										value="#{surveyManageBackingBean.costEstimateTableList}"
										resizableColumns="false" liveResize="false">

										<p:column headerText="Cost Type"
											style="text-align:left;width:15%">
											<h:outputText style="text-align:left;"
												value="#{costEstimateTableList.costCode}" />
										</p:column>
										<p:column headerText="Description"
											style="text-align:left;width:35%">
											<h:outputText style="text-align:left;"
												value="#{costEstimateTableList.costCodeDescription}" />
										</p:column>

										<p:column headerText="Amount Rs."
											style="text-align:right;width:15%">
											<h:outputText style="text-align:right;font-weight:bold"
												value="#{costEstimateTableList.amount}">
												<f:convertNumber pattern="##,###.00" />
											</h:outputText>
										</p:column>

										<p:column headerText="" style="width:7%">
											<p:commandLink
												action="${surveyManageBackingBean.delete_tbl_CostEstimateRaw(costEstimateTableList.costCodeSeqNo)}"
												update="@all" process="@all"
												disabled="#{surveyManageBackingBean.approvedEstimation}">
												<f:ajax render="paymentDetails" />
												<p:graphicImage library="images" name="delete.png"
													style="width:24px;height:24px;" title="delete"></p:graphicImage>
											</p:commandLink>
										</p:column>
										<p:columnGroup type="footer">
											<p:row>
												<p:column colspan="2" style="text-align:right"
													footerText="Total Fee Rs." />
												<p:column style="text-align:right; font-size: 15px;">
													<f:facet name="footer">
														<h:outputText
															value="#{surveyManageBackingBean.surveyLocationTeamDTO.totalAmount}">
															<f:convertNumber pattern="##,###.00" />
														</h:outputText>
													</f:facet>
												</p:column>

											</p:row>
										</p:columnGroup>
									</p:dataTable>
								</center>

								<br></br>
								<br></br>

								<p:panelGrid columns="2"
									columnClasses="ui-grid-col-3,ui-grid-col-9" layout="grid">
									<!-- _Special remarks -->
									<p:panelGrid>
										<p:outputLabel value="Special Remarks"></p:outputLabel>
										<p:outputLabel value="*" style="color:red;"></p:outputLabel>
									</p:panelGrid>
									<p:inputTextarea style="width:70%" maxlength="200" rows="3"
										disabled="#{surveyManageBackingBean.approvedEstimation}"
										counter="display" counterTemplate="{0} characters remaining."
										value="#{surveyManageBackingBean.surveyLocationTeamDTO.specialRemark}" >
											
										</p:inputTextarea>
									<br></br>
									<h:outputText id="display" />
								</p:panelGrid>

								<br></br>
								<br></br>

								<p:panelGrid columns="4"
									columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4,ui-grid-col-4"
									layout="grid">

									<p:panelGrid></p:panelGrid>
									<!-- Approve button -->
									<p:commandButton styleClass="mainLinkButton" style="width:100%"
										disabled="#{surveyManageBackingBean.approvedEstimation}"
										value="Approve" ajax="false" update="@all"
										action="#{surveyManageBackingBean.approveCostEstimation}"></p:commandButton>
									<!-- Reject button -->
									<p:commandButton styleClass="mainLinkButton" style="width:100%"
										disabled="#{surveyManageBackingBean.approvedEstimation}"
										value="Reject" ajax="false" update="@all"
										action="#{surveyManageBackingBean.approveCostEstimation}">
									</p:commandButton>
									<p:panelGrid></p:panelGrid>
								</p:panelGrid>

							</p:panel>
						</h:form>
					</p:tab>

					<!-- Tab 04 -->
					<p:tab title="Advanced Payment Voucher"
						rendered="#{surveyManageBackingBean.renderPaymentVoucher}">
						<h:form id="frmCreateAdvancedPayment">
							<br></br>
							<p:panelGrid columns="4"
								columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
								layout="grid">
								<p:panelGrid>
									<p:outputLabel value="Transaction Type"></p:outputLabel>
									<p:outputLabel value="*" style="color:red;"></p:outputLabel>
								</p:panelGrid>
								<p:panelGrid>
									<p:selectOneMenu id="transactionType" style="width:68%"
										disabled="true"
										value="#{surveyManageBackingBean.paymentVoucherDTO.transactionCode}"
										filter="true" filterMatchMode="contains" tabindex="1">

										<f:selectItem itemLabel="--Survey--" itemValue=""
											noSelectionOption="true" />
										<f:selectItems
											value="#{surveyManageBackingBean.transactionTypeList}"
											var="transactionTypeList"
											itemValue="#{transactionTypeList.code}"
											itemLabel="#{transactionTypeList.description}" />

									</p:selectOneMenu>

								</p:panelGrid>

								<p:panelGrid>
									<p:outputLabel value="Unit"></p:outputLabel>
									<p:outputLabel value="*" style="color:red;"></p:outputLabel>
								</p:panelGrid>
								<p:panelGrid>
									<p:selectOneMenu id="unit" style="width:68%"
										value="#{surveyManageBackingBean.paymentVoucherDTO.unitCode}"
										filter="true" filterMatchMode="contains" tabindex="1">

										<f:selectItem itemLabel="--Select Unit--" itemValue=""
											noSelectionOption="true" />
										<f:selectItems value="#{surveyManageBackingBean.unitList}"
											var="unitList" itemValue="#{unitList.code}"
											itemLabel="#{unitList.description}" />
									</p:selectOneMenu>
								</p:panelGrid>

								<p:panelGrid>
									<p:outputLabel value="Department"></p:outputLabel>
									<p:outputLabel value="*" style="color:red;"></p:outputLabel>
								</p:panelGrid>
								<p:panelGrid>

									<p:selectOneMenu id="department" style="width:68%"
										value="#{surveyManageBackingBean.paymentVoucherDTO.departmentCode}"
										filter="true" filterMatchMode="contains" tabindex="1">

										<f:selectItem itemLabel="--Select Department--" itemValue=""
											noSelectionOption="true" />
										<f:selectItems
											value="#{surveyManageBackingBean.deparmentList}"
											var="deparmentList" itemValue="#{deparmentList.code}"
											itemLabel="#{deparmentList.description}" />

									</p:selectOneMenu>

								</p:panelGrid>
								<p:panelGrid>
									<p:outputLabel value="Voucher No." style="text-align: left;"></p:outputLabel>
								</p:panelGrid>
								<p:panelGrid>

									<p:inputText id="voucherNo"
										onkeyup="this.value=this.value.toUpperCase();"
										style="width:66%; color:red;font-weight: bold;" maxlength="12"
										readonly="true"
										value="#{surveyManageBackingBean.paymentVoucherDTO.voucherNo}">
									</p:inputText>
								</p:panelGrid>

							</p:panelGrid>
							<br></br>

							<br></br>

							<p:panelGrid columns="4"
								columnClasses="ui-grid-col-2,ui-grid-col-3,ui-grid-col-5,ui-grid-col-2"
								layout="grid">
								<p:panelGrid></p:panelGrid>
								<p:panelGrid>
									<p:outputLabel value="Date"></p:outputLabel>
								</p:panelGrid>
								<p:panelGrid>
									<p:inputText value="#{surveyManageBackingBean.date1}"
										style="width:30%" disabled="true" />
								</p:panelGrid>
								<p:panelGrid></p:panelGrid>

								<p:panelGrid></p:panelGrid>
								<p:panelGrid>
									<p:outputLabel value="Details of Service or Items Provided"></p:outputLabel>
									<p:outputLabel value="*" style="color:red;"></p:outputLabel>
								</p:panelGrid>
								<p:panelGrid>
									<p:inputTextarea style="width:70%" maxlength="200" rows="3"
										counter="display" counterTemplate="{0} characters remaining."
										value="#{surveyManageBackingBean.advancedPaymentDTO.serviceDetails}" >
										
										</p:inputTextarea>
									<br />
									<h:outputText id="display" />
								</p:panelGrid>
								<p:panelGrid></p:panelGrid>

								<p:panelGrid></p:panelGrid>
								<p:panelGrid>
									<p:outputLabel value="No.of Units/Rate"></p:outputLabel>
									<p:outputLabel value="*" style="color:red;"></p:outputLabel>
								</p:panelGrid>
								<p:panelGrid>
									<p:inputNumber style="width:30%" padControl="false"
										inputStyle="text-align: right" id="txtUnit"
										value="#{surveyManageBackingBean.advancedPaymentDTO.noofUnits}">
										<p:ajax
											listener="#{surveyManageBackingBean.noOfUnitValidation}"
											update="txtUnit" />
									</p:inputNumber>
									<p:keyFilter regEx="/[\d]/i" />
								</p:panelGrid>
								<p:panelGrid></p:panelGrid>

								<p:panelGrid></p:panelGrid>
								<p:panelGrid columns="2" style="padding:0px;margin:0px;"
									styleClass="internalPanel"
									columnClasses="ui-grid-col-11,ui-grid-col-1" layout="grid">

									<p:panelGrid styleClass="internalPanel">
										<p:outputLabel value="Amount"></p:outputLabel>
										<p:outputLabel value="*" style="color:red;text-align:left"></p:outputLabel>
									</p:panelGrid>

									<p:outputLabel value="Rs." styleClass="internalInput"
										style="text-align:right;margin: auto;padding-right:0px;"></p:outputLabel>

								</p:panelGrid>
								<p:panelGrid>
									<p:inputNumber style="width:30%" inputStyle="text-align: right"
										id="txtAmount"
										value="#{surveyManageBackingBean.advancedPaymentDTO.amount}">

										<p:ajax
											listener="#{surveyManageBackingBean.totalBusFareValidation}"
											update="txtAmount" />
									</p:inputNumber>
								</p:panelGrid>
								<p:panelGrid></p:panelGrid>
							</p:panelGrid>
							<br></br>
							<center>
								<p:commandButton id="cmdbtnAdd" value="Add"
									action="#{surveyManageBackingBean.addNewChargeDetails}"
									disabled="#{surveyManageBackingBean.disable}"
									class="mainActionbtn" update="@form" process="@form">
								</p:commandButton>

								<p:commandButton styleClass="mainActionbtn" value="Clear"
									update="@form" process="@form" id="cmdbtnClear"
									action="#{surveyManageBackingBean.clearEnteredVal}"></p:commandButton>
							</center>
							<br></br>
							<center>
								<p:dataTable var="advancedPaymenttable" update="@form"
									style="width:98%;" id="dtPayment"
									value="#{surveyManageBackingBean.paymentDetails}"
									resizableColumns="false" liveResize="false">

									<p:column headerText="Date" style="text-align:left;width:10%">
										<h:outputText style="text-align:left;"
											value="#{advancedPaymenttable.date}" />
									</p:column>
									<p:column headerText="Details of Service or Items Provided"
										style="text-align:left;width:35%">
										<h:outputText style="text-align:left;"
											value="#{advancedPaymenttable.serviceDetails}" />
									</p:column>
									<p:column headerText="No. of Unit/ Rate"
										style="text-align:right;width:10%">
										<h:outputText style="text-align:right;"
											value="#{advancedPaymenttable.noofUnits}" />
									</p:column>
									<p:column headerText="Amount Rs."
										style="text-align:right;width:10%">
										<h:outputText style="text-align:right;"
											value="#{advancedPaymenttable.amount}">
											<f:convertNumber pattern="##,###.00" />
										</h:outputText>
									</p:column>

									<p:column headerText="" style="width:7%">
										<p:commandLink
											action="${surveyManageBackingBean.delete(advancedPaymenttable.serviceDetails)}"
											update="@form" process="@form"
											disabled="#{surveyManageBackingBean.disable}">
											<f:ajax render="paymentDetails" />
											<p:graphicImage library="images" name="delete.png"
												style="width:24px;height:24px;" title="delete"></p:graphicImage>
										</p:commandLink>
									</p:column>
									<p:columnGroup type="footer">
										<p:row>
											<p:column colspan="3" style="text-align:right"
												footerText="Total Fee Rs." />
											<p:column style="text-align:right">
												<f:facet name="footer">
													<h:outputText value="#{surveyManageBackingBean.totalfee}">
														<f:convertNumber pattern="##,###.00" />
													</h:outputText>
												</f:facet>
											</p:column>

										</p:row>
									</p:columnGroup>
								</p:dataTable>
							</center>
							<br />
							<center>
								<p:commandButton id="cmdbtnGenerateVou" value="Generate Voucher"
									class="mainActionbtn" ajax="false" update="@form"
									style="width:auto;" process="@form"
									disabled="#{surveyManageBackingBean.generatebtn}"
									actionListener="#{surveyManageBackingBean.generateVoucher}">
								</p:commandButton>


								<p:commandButton value="Print" ajax="false" id="print"
									styleClass="mainActionbtn"
									actionListener="#{surveyManageBackingBean.printVoucher}"
									disabled="#{surveyManageBackingBean.printbtn}"
									onclick="PrimeFaces.monitorDownload(start, stop);"
									oncomplete="PF('genReport').hide();"
									update="@form cmdbtnGenerateVou">

									<f:attribute name="value"
										value="#{surveyManageBackingBean.paymentVoucherDTO.voucherNo}"></f:attribute>
									<p:fileDownload value="#{surveyManageBackingBean.files}" />
								</p:commandButton>

								<p:commandButton styleClass="mainActionbtn" value="Clear"
									update="@form" process="@form" id="cmdbtnMainClear"
									action="#{surveyManageBackingBean.clearMain}"></p:commandButton>
							</center>
							<br />
						</h:form>
					</p:tab>
				</p:tabView>
			</div>
		</div>

		<!-- Display required field field error massage -->
		<p:dialog styleClass="" id="frm_Tender" global="true" modal="true"
			header="#{msg['um.employeeprofile.dlmissing']}" width="30%"
			severity="info" widgetVar="requiredField" closeOnEscape="true"
			resizable="false">
			<h:form id="frmrequiredField">
				<center>
					<p:panelGrid columns="2" styleClass="ui-noborder">
						<p:graphicImage library="images" name="error-24.png"></p:graphicImage>
						<p:outputLabel value="#{surveyManageBackingBean.errorMsg}"></p:outputLabel>

					</p:panelGrid>
					<br></br>
					<p:commandButton style="margin-top:10px;margin-bottom:10px"
						process="frm_Tender"
						value="#{msg['um.employeeprofile.dlmissingclose']}"
						onclick="PF('requiredField').hide()">
					</p:commandButton>

				</center>
			</h:form>
		</p:dialog>
		<!-- Display alert massage -->
		<p:dialog styleClass="" id="alertMessage" global="true" modal="true"
			header="Information" width="30%" severity="info"
			widgetVar="alertMessage" closeOnEscape="true" resizable="false">
			<h:form id="frmAlert">
				<p:panelGrid columns="3" style="margin-top:3%"
					columnClasses="ui-grid-col-1,ui-grid-col-2,ui-grid-col-9"
					layout="grid">
					<p:panelGrid></p:panelGrid>
					<p:panelGrid>
						<div></div>
						<div></div>
						<p:panelGrid></p:panelGrid>
						<p:panelGrid></p:panelGrid>
						<p:graphicImage library="images" name="warning.png"></p:graphicImage>
					</p:panelGrid>
					<p:panelGrid>
						<p:outputLabel style="margin-left:15%"
							value="#{surveyManageBackingBean.alertMsg}"></p:outputLabel>

						<p:panelGrid columns="2" style="margin-top:3%"
							columnClasses="ui-grid-col-2,ui-grid-col-10" layout="grid">
							<center>
								<p:commandButton style="margin-top:10px;margin-bottom:10px"
									process="frmAlert"
									value="#{msg['um.employeeprofile.dlmissingclose']}"
									onclick="PF('alertMSG').hide()">
								</p:commandButton>
							</center>
							<p:panelGrid></p:panelGrid>
						</p:panelGrid>
					</p:panelGrid>
				</p:panelGrid>
			</h:form>
		</p:dialog>
		<!-- Display success massage -->
		<p:dialog styleClass="" id="successMessage" global="true" modal="true"
			header="Success" width="30%" severity="info"
			widgetVar="successMessage" closeOnEscape="true" resizable="false">

			<h:form id="frmsuccess">
				<center>
					<p:panelGrid columns="2" styleClass="ui-noborder">
						<p:graphicImage library="images" name="success-24.png"></p:graphicImage>

						<p:outputLabel value="Successfully Saved."></p:outputLabel>

					</p:panelGrid>
					<br></br>
					<p:commandButton style="margin-top:10px;margin-bottom:10px"
						value="OK" process="frmsuccess"
						onclick="PF('successMessage').hide()">
					</p:commandButton>
				</center>
			</h:form>
		</p:dialog>

	</ui:define>
</ui:composition>